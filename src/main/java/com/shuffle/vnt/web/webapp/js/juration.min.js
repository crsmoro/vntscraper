/*
 * juration - a natural language duration parser
 * https://github.com/domchristie/juration
 *
 * Copyright 2011, Dom Christie
 * Licenced under the MIT licence
 *
 */
!function(){var r={seconds:{patterns:["second","sec","s"],value:1,formats:{chrono:"",micro:"s","short":"sec","long":"second"}},minutes:{patterns:["minute","min","m(?!s)"],value:60,formats:{chrono:":",micro:"m","short":"min","long":"minute"}},hours:{patterns:["hour","hr","h"],value:3600,formats:{chrono:":",micro:"h","short":"hr","long":"hour"}},days:{patterns:["day","dy","d"],value:86400,formats:{chrono:":",micro:"d","short":"day","long":"day"}},weeks:{patterns:["week","wk","w"],value:604800,formats:{chrono:":",micro:"w","short":"wk","long":"week"}},months:{patterns:["month","mon","mo","mth"],value:2628e3,formats:{chrono:":",micro:"m","short":"mth","long":"month"}},years:{patterns:["year","yr","y"],value:31536e3,formats:{chrono:":",micro:"y","short":"yr","long":"year"}}},o=function(o,t){if(!a(o))throw"juration.stringify(): Unable to stringify a non-numeric value";if("object"==typeof t&&void 0!==t.format&&"micro"!==t.format&&"short"!==t.format&&"long"!==t.format&&"chrono"!==t.format)throw"juration.stringify(): format cannot be '"+t.format+"', and must be either 'micro', 'short', or 'long'";for(var i={format:"short",units:void 0},m=s(i,t),f=["years","months","days","hours","minutes","seconds"],u=[],h=o,c=0,l=0,d=f.length;d>l&&(void 0==m.units||c<m.units);l++){var p=r[f[l]];u[l]=Math.floor(h/p.value),(u[l]>0||c>0)&&c++,"micro"===m.format||"chrono"===m.format?u[l]+=p.formats[m.format]:u[l]+=" "+e(u[l],p.formats[m.format]),h%=p.value}var g="";for(l=0,d=u.length;d>l;l++)"0"!==u[l].charAt(0)&&"chrono"!=m.format?g+=u[l]+" ":"chrono"==m.format&&(g+=n(u[l]+"","0",l==u.length-1?2:3));return g.replace(/\s+$/,"").replace(/^(00:)+/g,"").replace(/^0/,"")},t=function(o){for(var t in r)for(var n=0,e=r[t].patterns.length;e>n;n++){var a=new RegExp("((?:\\d+\\.\\d+)|\\d+)\\s?("+r[t].patterns[n]+"s?(?=\\s|\\d|\\b))","gi");o=o.replace(a,function(o,n,e){return" "+(n*r[t].value).toString()+" "})}for(var s=0,i=o.replace(/(?!\.)\W+/g," ").replace(/^\s+|\s+$|(?:and|plus|with)\s?/g,"").split(" "),m=0,f=i.length;f>m;m++){if(!i[m]||!isFinite(i[m]))throw i[m]?"juration.parse(): Unable to parse: "+i[m].replace(/^\d+/g,""):"juration.parse(): Unable to parse: a falsey value";s+=parseFloat(i[m])}return s},n=function(r,o,t){if(!r||!o||r.length>=t)return r;for(var n=(t-r.length)/o.length,e=0;n>e;e++)r=o+r;return r},e=function(r,o){return 1==r?o:o+"s"},a=function(r){return!isNaN(parseFloat(r))&&isFinite(r)},s=function(r,o){for(var t in o)void 0!==o[t]&&(r[t]=o[t]);return r},i={parse:t,stringify:o,humanize:o};"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=i:(window.juration=i,"function"==typeof define&&define.amd&&define("juration",[],function(){return i}))}();